stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
SET @positive= 18446744073709551615;
SET @negative= -9223372036854775808;
CREATE TABLE t1 (`tinyint` TINYINT,
`smallint` SMALLINT,
`mediumint` MEDIUMINT, 
`integer` INTEGER,
`bigint` BIGINT,
`utinyint` TINYINT UNSIGNED,
`usmallint` SMALLINT UNSIGNED,
`umediumint` MEDIUMINT UNSIGNED, 
`uinteger` INTEGER UNSIGNED,
`ubigint` BIGINT UNSIGNED,
`double` DOUBLE, 
`float` FLOAT, 
`real` REAL(30,2), 
`decimal` DECIMAL(30,2)) ENGINE = MyISAM;
### insert max unsigned
### a) declarative
INSERT INTO t1 VALUES (18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615,18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615);;
#########################################
#### [ on master ]
SELECT * FROM t1;
tinyint	127
smallint	32767
mediumint	8388607
integer	2147483647
bigint	9223372036854775807
utinyint	255
usmallint	65535
umediumint	16777215
uinteger	4294967295
ubigint	18446744073709551615
double	1.84467440737096e+19
float	1.84467e+19
real	18446744073709551616.00
decimal	18446744073709551615.00
#### [ on slave ]
SELECT * FROM t1;
tinyint	127
smallint	32767
mediumint	8388607
integer	2147483647
bigint	9223372036854775807
utinyint	255
usmallint	65535
umediumint	16777215
uinteger	4294967295
ubigint	18446744073709551615
double	1.84467440737096e+19
float	1.84467e+19
real	18446744073709551616.00
decimal	18446744073709551615.00
#########################################
## assertion: master and slave tables are in sync
Comparing tables master:test.t1 and slave:test.t1
TRUNCATE t1;
### b) user var
INSERT INTO t1 VALUES (@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive);
#########################################
#### [ on master ]
SELECT * FROM t1;
tinyint	127
smallint	32767
mediumint	8388607
integer	2147483647
bigint	9223372036854775807
utinyint	255
usmallint	65535
umediumint	16777215
uinteger	4294967295
ubigint	18446744073709551615
double	1.84467440737096e+19
float	1.84467e+19
real	18446744073709551616.00
decimal	18446744073709551615.00
#### [ on slave ]
SELECT * FROM t1;
tinyint	127
smallint	32767
mediumint	8388607
integer	2147483647
bigint	9223372036854775807
utinyint	255
usmallint	65535
umediumint	16777215
uinteger	4294967295
ubigint	18446744073709551615
double	1.84467440737096e+19
float	1.84467e+19
real	18446744073709551616.00
decimal	18446744073709551615.00
#########################################
## assertion: master and slave tables are in sync
Comparing tables master:test.t1 and slave:test.t1
TRUNCATE t1;
### insert min signed
### a) declarative
INSERT INTO t1 VALUES (-9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808,-9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808);;
#########################################
#### [ on master ]
SELECT * FROM t1;
tinyint	-128
smallint	-32768
mediumint	-8388608
integer	-2147483648
bigint	-9223372036854775808
utinyint	0
usmallint	0
umediumint	0
uinteger	0
ubigint	0
double	-9.22337203685478e+18
float	-9.22337e+18
real	-9223372036854775808.00
decimal	-9223372036854775808.00
#### [ on slave ]
SELECT * FROM t1;
tinyint	-128
smallint	-32768
mediumint	-8388608
integer	-2147483648
bigint	-9223372036854775808
utinyint	0
usmallint	0
umediumint	0
uinteger	0
ubigint	0
double	-9.22337203685478e+18
float	-9.22337e+18
real	-9223372036854775808.00
decimal	-9223372036854775808.00
#########################################
## assertion: master and slave tables are in sync
Comparing tables master:test.t1 and slave:test.t1
TRUNCATE t1;
### b) user var
INSERT INTO t1 VALUES (@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative);
#########################################
#### [ on master ]
SELECT * FROM t1;
tinyint	-128
smallint	-32768
mediumint	-8388608
integer	-2147483648
bigint	-9223372036854775808
utinyint	0
usmallint	0
umediumint	0
uinteger	0
ubigint	0
double	-9.22337203685478e+18
float	-9.22337e+18
real	-9223372036854775808.00
decimal	-9223372036854775808.00
#### [ on slave ]
SELECT * FROM t1;
tinyint	-128
smallint	-32768
mediumint	-8388608
integer	-2147483648
bigint	-9223372036854775808
utinyint	0
usmallint	0
umediumint	0
uinteger	0
ubigint	0
double	-9.22337203685478e+18
float	-9.22337e+18
real	-9223372036854775808.00
decimal	-9223372036854775808.00
#########################################
## assertion: master and slave tables are in sync
Comparing tables master:test.t1 and slave:test.t1
TRUNCATE t1;
## check: contents of both tables master's and slave's
## assertion: checks that User_var_log_event::pack_info correctly
## displays the binlog content by taking into account the
## unsigned_flag
show binlog events from <binlog_start>;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	#	Query	#	#	use `test`; CREATE TABLE t1 (`tinyint` TINYINT,
`smallint` SMALLINT,
`mediumint` MEDIUMINT, 
`integer` INTEGER,
`bigint` BIGINT,
`utinyint` TINYINT UNSIGNED,
`usmallint` SMALLINT UNSIGNED,
`umediumint` MEDIUMINT UNSIGNED, 
`uinteger` INTEGER UNSIGNED,
`ubigint` BIGINT UNSIGNED,
`double` DOUBLE, 
`float` FLOAT, 
`real` REAL(30,2), 
`decimal` DECIMAL(30,2)) ENGINE = MyISAM
master-bin.000001	#	Query	#	#	BEGIN
master-bin.000001	#	Query	#	#	use `test`; INSERT INTO t1 VALUES (18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615,18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615, 18446744073709551615)
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Query	#	#	use `test`; TRUNCATE t1
master-bin.000001	#	Query	#	#	BEGIN
master-bin.000001	#	User var	#	#	@`positive`=18446744073709551615
master-bin.000001	#	Query	#	#	use `test`; INSERT INTO t1 VALUES (@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive,
@positive)
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Query	#	#	use `test`; TRUNCATE t1
master-bin.000001	#	Query	#	#	BEGIN
master-bin.000001	#	Query	#	#	use `test`; INSERT INTO t1 VALUES (-9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808,-9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808, -9223372036854775808)
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Query	#	#	use `test`; TRUNCATE t1
master-bin.000001	#	Query	#	#	BEGIN
master-bin.000001	#	User var	#	#	@`negative`=-9223372036854775808
master-bin.000001	#	Query	#	#	use `test`; INSERT INTO t1 VALUES (@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative,
@negative)
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Query	#	#	use `test`; TRUNCATE t1
DROP TABLE t1;
